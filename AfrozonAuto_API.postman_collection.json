{
	"info": {
		"_postman_id": "afrozon-auto-api-2025",
		"name": "Afrozon AutoGlobal API",
		"description": "Complete API collection for Afrozon AutoGlobal platform. Includes Authentication, Vehicles, Addresses, and User management endpoints.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "afrozon-auto"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register Start (Check User)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    pm.environment.set(\"userEmail\", pm.response.json().data.email);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register-start",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register-start"]
						},
						"description": "Check if user exists by email and send verification token to email. This is the first step in the registration flow.\n\n**Request Body:**\n- `email` (required): Valid email address\n\n**Response:**\n- If user exists: Returns user email\n- If user doesn't exist: Proceeds with registration flow\n\n**Note:** This endpoint does NOT require authentication."
					},
					"response": []
				},
				{
					"name": "Register",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    console.log(\"Registration successful\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"password\": \"password123\",\n  \"phone\": \"+1234567890\",\n  \"role\": \"BUYER\",\n  \"isActive\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "Register a new user account. **Must call `/register-start` and `/verify` first** to validate email.\n\n**Required Fields:**\n- `email`: Valid email address (must be verified via `/verify` endpoint)\n- `firstName`: User's first name\n- `lastName`: User's last name\n\n**Optional Fields:**\n- `password`: User password (optional, can be set later)\n- `phone`: Phone number with country code (e.g., +1234567890)\n- `role`: User role - BUYER, SELLER, ADMIN, SUPER_ADMIN, OPERATIONS_ADMIN (default: BUYER)\n- `isActive`: Account active status (default: true)\n\n**Response:**\n- Returns created user object (201 Created)\n\n**Registration Flow:**\n1. POST `/register-start` - Check if user exists, send verification token\n2. POST `/verify` - Verify email with token (use `999999` for testing)\n3. POST `/register` - Complete registration\n\n**Note:** Email must be verified before registration. Do NOT include `fullName` field - only `firstName` and `lastName` are accepted."
					},
					"response": []
				},
				{
					"name": "Verify Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"token\": \"999999\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/verify",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "verify"]
						},
						"description": "Verify email address using the token sent to the user's email. This is required before completing registration.\n\n**Request Body:**\n- `email` (required): Email address to verify\n- `token` (required): 6-digit verification token sent to email OR test token `999999` (for development/testing)\n\n**Response:**\n- Returns success message if token is valid\n- Token expires after a set time (check TOKEN_EXPIRY_MINUTES in config)\n\n**Note:** Token is sent via email after calling `/register-start`. For testing, you can use token `999999` which will verify any email address in development mode."
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.environment.set(\"accessToken\", response.data.accessToken);",
									"        pm.environment.set(\"refreshToken\", response.data.refreshToken);",
									"        pm.environment.set(\"userId\", response.data.user.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "Authenticate user and receive JWT tokens for API access.\n\n**Request Body:**\n- `email` (required): User email address\n- `password` (required): User password - **Required in practice** (controller validates this even though schema shows optional)\n\n**Response:**\n- `user`: User object (without password, includes `online: true`)\n- `accessToken`: JWT access token (short-lived, default: 2 minutes)\n- `refreshToken`: JWT refresh token (long-lived, default: 7 days)\n\n**Note:** Tokens are automatically saved to Postman environment variables for use in other requests. Access token should be included in `Authorization: Bearer {accessToken}` header for protected endpoints."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.environment.set(\"accessToken\", response.data.accessToken);",
									"        pm.environment.set(\"refreshToken\", response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh-token",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "refresh-token"]
						},
						"description": "Get a new access token using a valid refresh token. Use this when the access token expires.\n\n**Request Body:**\n- `token` (required): Refresh token from login response\n\n**Response:**\n- `accessToken`: New JWT access token\n- `refreshToken`: New refresh token (may be rotated)\n\n**Note:** Tokens are automatically updated in Postman environment. Refresh tokens expire after 7 days (default)."
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/forgot-password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "forgot-password"]
						},
						"description": "Initiate password reset flow by sending a reset token to user's email.\n\n**Request Body:**\n- `email` (required): User email address\n\n**Response:**\n- Success message (token sent to email)\n\n**Next Steps:**\n1. User receives token via email\n2. Call `/token-validation-reset` to validate token\n3. Call `/reset-password` with validated token to set new password"
					},
					"response": []
				},
				{
					"name": "Token Validation (Reset)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"token\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/token-validation-reset",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "token-validation-reset"]
						},
						"description": "Validate password reset token before allowing password change. This must be called before `/reset-password`.\n\n**Request Body:**\n- `email` (required): User email address\n- `token` (required): Reset token sent to email\n\n**Response:**\n- Success message if token is valid\n- Error if token is invalid or expired\n\n**Note:** Token expires after a set time. Must call `/forgot-password` first to receive token."
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"token\": \"123456\",\n  \"newPassword\": \"newPassword123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/reset-password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "reset-password"]
						},
						"description": "Reset user password using a validated reset token. **Must call `/token-validation-reset` first**.\n\n**Request Body:**\n- `email` (required): User email address\n- `token` (required): Validated reset token\n- `newPassword` (required): New password (minimum 6 characters recommended)\n\n**Response:**\n- Success message if password reset successful\n\n**Security:** Token must be validated first. Password should meet security requirements."
					},
					"response": []
				},
				{
					"name": "Send Recovery Email Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"recoveryEmail\": \"recovery@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/send-token-recovery-email",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "send-token-recovery-email"]
						},
						"description": "Send verification token to a recovery email address. Used for account recovery purposes.\n\n**Request Body:**\n- `recoveryEmail` (required): Recovery email address to send token to\n\n**Response:**\n- Success message (token sent to recovery email)\n\n**Note:** Recovery email is typically different from the primary account email."
					},
					"response": []
				},
				{
					"name": "Google Auth Verify",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"google_oauth_code_here\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/google-auth-verify",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "google-auth-verify"]
						},
						"description": "Complete Google OAuth authentication flow. Verifies Google OAuth code and either logs in existing user or creates new account.\n\n**Request Body:**\n- `code` (required): OAuth authorization code from Google\n\n**Response:**\n- `user`: User object (created or existing)\n- `accessToken`: JWT access token\n- `refreshToken`: JWT refresh token\n\n**OAuth Flow:**\n1. User clicks \"Sign in with Google\"\n2. Redirected to Google OAuth consent screen\n3. Google redirects back with authorization code\n4. Frontend sends code to this endpoint\n5. Backend exchanges code for user info and creates/logs in user\n\n**Note:** Requires Google OAuth to be configured in environment variables."
					},
					"response": []
				},
				{
					"name": "Apple Auth Initiate",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/apple-auth-initiate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "apple-auth-initiate"]
						},
						"description": "Initiate Apple Sign-In authentication flow. Returns authorization URL to redirect user to Apple's consent screen.\n\n**Request Body:**\n- Empty object `{}` or no body required\n\n**Response:**\n- `authUrl`: Apple OAuth authorization URL\n- Redirect user to this URL\n\n**OAuth Flow:**\n1. Call this endpoint to get `authUrl`\n2. Redirect user to `authUrl`\n3. User authenticates with Apple\n4. Apple redirects back with authorization code\n5. Handle code in frontend and complete authentication\n\n**Note:** Requires Apple OAuth to be configured in environment variables (APPLE_CLIENT_ID, APPLE_TEAM_ID, APPLE_PRIVATE_KEY, etc.)."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for user registration, login, password reset, and OAuth (Google, Apple).\n\n**Registration Flow:**\n1. POST `/register-start` - Check if user exists, send verification token\n2. POST `/verify` - Verify email with token\n3. POST `/register` - Complete registration\n\n**Login Flow:**\n1. POST `/login` - Authenticate and receive tokens\n2. POST `/refresh-token` - Refresh access token when expired\n\n**Password Reset Flow:**\n1. POST `/forgot-password` - Request reset token\n2. POST `/token-validation-reset` - Validate reset token\n3. POST `/reset-password` - Set new password\n\n**OAuth Flows:**\n- Google: POST `/google-auth-verify` with OAuth code\n- Apple: POST `/apple-auth-initiate` to get auth URL, then handle callback"
		},
		{
			"name": "Vehicles",
			"item": [
				{
					"name": "Get Vehicles (List with Filters)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles?make=Toyota&model=Camry&yearMin=2020&yearMax=2024&priceMin=10000&priceMax=50000&mileageMax=50000&vehicleType=CAR&status=AVAILABLE&state=CA&featured=true&search=camry&page=1&limit=50&includeApi=true&category=suv",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles"],
							"query": [
								{
									"key": "make",
									"value": "Toyota",
									"description": "Vehicle make (e.g., Toyota, Honda)"
								},
								{
									"key": "model",
									"value": "Camry",
									"description": "Vehicle model"
								},
								{
									"key": "yearMin",
									"value": "2020",
									"description": "Minimum year"
								},
								{
									"key": "yearMax",
									"value": "2024",
									"description": "Maximum year"
								},
								{
									"key": "priceMin",
									"value": "10000",
									"description": "Minimum price in USD"
								},
								{
									"key": "priceMax",
									"value": "50000",
									"description": "Maximum price in USD"
								},
								{
									"key": "mileageMax",
									"value": "50000",
									"description": "Maximum mileage"
								},
								{
									"key": "vehicleType",
									"value": "CAR",
									"description": "Vehicle type: CAR, SUV, TRUCK, VAN, COUPE, SEDAN, HATCHBACK, WAGON, CONVERTIBLE"
								},
								{
									"key": "status",
									"value": "AVAILABLE",
									"description": "Vehicle status: AVAILABLE, SOLD, PENDING, RESERVED"
								},
								{
									"key": "state",
									"value": "CA",
									"description": "Dealer state"
								},
								{
									"key": "featured",
									"value": "true",
									"description": "Filter featured vehicles"
								},
								{
									"key": "search",
									"value": "camry",
									"description": "Search in make, model, or VIN"
								},
								{
									"key": "page",
									"value": "1",
									"description": "Page number (default: 1)"
								},
								{
									"key": "limit",
									"value": "50",
									"description": "Items per page (default: 50, max: 100)"
								},
								{
									"key": "includeApi",
									"value": "true",
									"description": "Include API results if DB results insufficient (default: true)"
								},
								{
									"key": "category",
									"value": "suv",
									"description": "Category slug: electric, suv, sedan, pickup-truck, luxury, crossover, hybrid, diesel, coupe, hatchback, wagon, convertible, minivan, plug-in-hybrid, van"
								}
							]
						},
						"description": "Get list of vehicles with filters. **Public endpoint** - no authentication required.\n\n**Hybrid Search Strategy:**\n1. First searches database (DB)\n2. If results insufficient, checks Redis cache (12hr TTL)\n3. If cache miss, fetches from Auto.dev API and caches results\n4. Combines DB + API results\n5. Background price refresh for stale DB vehicles\n\n**Query Parameters (all optional):**\n- `make`: Vehicle make (e.g., Toyota, Jeep)\n- `model`: Vehicle model\n- `yearMin`, `yearMax`: Year range\n- `priceMin`, `priceMax`: Price range in USD\n- `mileageMax`: Maximum mileage\n- `vehicleType`: CAR, SUV, TRUCK, VAN, COUPE, SEDAN, HATCHBACK, WAGON, CONVERTIBLE\n- `status`: AVAILABLE, SOLD, PENDING, RESERVED\n- `state`: Dealer state (maps to `dealerState` filter)\n- `featured`: Filter featured vehicles (true/false)\n- `search`: Search in make, model, or VIN\n- `includeApi` (default: true): Whether to include Auto.dev API results if DB results insufficient\n- `page` (default: 1): Page number\n- `limit` (default: 50, max: 100): Items per page\n\n**Response Format:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Vehicles retrieved successfully\",\n  \"data\": {\n    \"data\": [/* array of vehicles */],\n    \"meta\": {\n      \"page\": 1,\n      \"limit\": 50,\n      \"total\": 100,\n      \"pages\": 2,\n      \"fromApi\": 25\n    }\n  },\n  \"timestamp\": \"2025-01-08T...\"\n}\n```\n\n**Note:** API results are cached in Redis (12-hour TTL) to handle price changes efficiently and reduce external API calls. Use **category** to filter by admin-configured category slug (e.g. suv, electric, luxury)."
					},
					"response": []
				},
				{
					"name": "Get Trending Vehicles",
					"request": {
						"method": "GET",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/trending",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", "trending"]
						},
						"description": "Get trending vehicles. **Public endpoint** - no auth required.\n\nReturns: (1) Vehicles people ordered (most ordered first), then (2) 5 vehicles per active trending rule from Auto.dev (make, model, year range). Admin configures rules at POST/PUT /api/vehicles/trending-definitions."
					},
					"response": []
				},
				{
					"name": "Get Categories",
					"request": {
						"method": "GET",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/categories",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", "categories"]
						},
						"description": "List active vehicle categories for filtering (Electric, SUV, Sedan, Luxury, etc.). **Public endpoint** - no auth required.\n\nUse returned slugs in GET /api/vehicles?category=<slug>."
					},
					"response": []
				},
				{
					"name": "Get Vehicles by Category",
					"request": {
						"method": "GET",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles?category=suv&page=1&limit=50",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles"],
							"query": [
								{"key": "category", "value": "suv", "description": "Category slug from GET /categories"},
								{"key": "page", "value": "1"},
								{"key": "limit", "value": "50"}
							]
						},
						"description": "Get vehicles filtered by category. **Public endpoint.** Valid slugs: electric, suv, sedan, pickup-truck, luxury, crossover, hybrid, diesel, coupe, hatchback, wagon, convertible, minivan, plug-in-hybrid, van."
					},
					"response": []
				},
				{
					"name": "Get Vehicle by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/:id?vin=1HGBH41JXMN109186",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", ":id"],
							"query": [
								{
									"key": "vin",
									"value": "1HGBH41JXMN109186",
									"description": "Optional VIN to try Redis cache or Auto.dev API if ID not found in DB",
									"disabled": false
								}
							],
							"variable": [
								{
									"key": "id",
									"value": "vehicle_id_here",
									"description": "Vehicle ID (MongoDB ObjectId)"
								}
							]
						},
						"description": "Get vehicle by ID or VIN. **Public endpoint** - no authentication required.\n\n**URL Parameters:**\n- `id` (required): Vehicle ID (MongoDB ObjectId) OR VIN (17-character string)\n\n**Query Parameters:**\n- `vin` (optional): VIN to try Redis cache or Auto.dev API if ID not found in DB\n\n**Response:**\n- Vehicle object if found\n- 404 if not found\n\n**Note:** If vehicle not found in DB and VIN provided, will check Redis cache (12hr TTL) then Auto.dev API. Does NOT auto-save to DB - use `/save-from-api` endpoint for that."
					},
					"response": []
				},
				{
					"name": "Create Vehicle (Admin Only)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"description": "Required - JWT access token (SUPER_ADMIN or OPERATIONS_ADMIN role)"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"vin\": \"1HGBH41JXMN109186\",\n  \"slug\": \"2024-toyota-camry-109186\",\n  \"make\": \"Toyota\",\n  \"model\": \"Camry\",\n  \"year\": 2024,\n  \"vehicleType\": \"SEDAN\",\n  \"priceUsd\": 25000,\n  \"originalPriceUsd\": 28000,\n  \"mileage\": 15000,\n  \"transmission\": \"Automatic\",\n  \"fuelType\": \"Gasoline\",\n  \"images\": [\n    \"https://example.com/image1.jpg\",\n    \"https://example.com/image2.jpg\"\n  ],\n  \"source\": \"MANUAL\",\n  \"status\": \"AVAILABLE\",\n  \"availability\": \"IN_STOCK\",\n  \"featured\": true,\n  \"isActive\": true,\n  \"isHidden\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicles",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles"]
						},
						"description": "Create a new vehicle manually in the database. Requires SUPER_ADMIN or OPERATIONS_ADMIN role.\n\n**Required Fields:**\n- `vin`: 17-character VIN\n- `slug`: SEO-friendly URL slug\n- `make`: Vehicle manufacturer\n- `model`: Vehicle model\n- `year`: Manufacturing year (integer)\n- `vehicleType`: CAR, SUV, TRUCK, VAN, COUPE, SEDAN, HATCHBACK, WAGON, CONVERTIBLE\n- `priceUsd`: Price in USD (number)\n\n**Optional Fields:**\n- `originalPriceUsd`, `mileage`, `transmission`, `fuelType`, `images`, `source`, `status`, `availability`, `featured`, `isActive`, `isHidden`"
					},
					"response": []
				},
				{
					"name": "Sync Vehicle from Auto.dev",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"description": "Required - JWT access token"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/sync/:vin",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", "sync", ":vin"],
							"variable": [
								{
									"key": "vin",
									"value": "1HGBH41JXMN109186",
									"description": "17-character VIN (required in URL path)"
								}
							]
						},
						"description": "Sync vehicle from Auto.dev API by VIN. Fetches listing, photos, and specifications. Saves/updates vehicle in database. Requires authentication. No request body needed - VIN is in URL path."
					},
					"response": []
				},
				{
					"name": "Save Vehicle from API",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"description": "Required - JWT access token"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"vin\": \"1HGBH41JXMN109186\",\n  \"listing\": {\n    \"vin\": \"1HGBH41JXMN109186\",\n    \"make\": \"Toyota\",\n    \"model\": \"Camry\",\n    \"year\": 2024,\n    \"price\": 25000,\n    \"mileage\": 15000,\n    \"bodyStyle\": \"Sedan\",\n    \"transmission\": \"Automatic\",\n    \"fuelType\": \"Gasoline\",\n    \"exteriorColor\": \"Blue\",\n    \"interiorColor\": \"Black\",\n    \"dealerName\": \"ABC Motors\",\n    \"dealerState\": \"CA\",\n    \"dealerCity\": \"Los Angeles\",\n    \"dealerZipCode\": \"90001\",\n    \"features\": [\"Bluetooth\", \"Navigation\"]\n  },\n  \"photos\": [\n    \"https://example.com/photo1.jpg\",\n    \"https://example.com/photo2.jpg\"\n  ],\n  \"specs\": {\n    \"engine\": \"2.5L 4-Cylinder\",\n    \"horsepower\": 203,\n    \"torque\": 184\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/save-from-api",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", "save-from-api"]
						},
						"description": "Save a vehicle from Auto.dev API to database (e.g., when user initiates payment). This is the PRIMARY endpoint for persisting API vehicles to DB. Requires authentication.\n\n**Body Parameters:**\n- `vin` (required): 17-character VIN\n- `listing` (required): Full vehicle listing object from Auto.dev API\n- `photos` (optional): Array of photo URLs\n- `specs` (optional): Vehicle specifications object"
					},
					"response": []
				},
				{
					"name": "Update Vehicle (Admin Only)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"description": "Required - JWT access token (SUPER_ADMIN or OPERATIONS_ADMIN role)"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"priceUsd\": 24000,\n  \"status\": \"SOLD\",\n  \"featured\": false,\n  \"isActive\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/:id",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", ":id"],
							"variable": [
								{
									"key": "id",
									"value": "vehicle_id_here",
									"description": "Vehicle ID (MongoDB ObjectId)"
								}
							]
						},
						"description": "Update vehicle by ID. Partial updates supported - only include fields to update. Requires SUPER_ADMIN or OPERATIONS_ADMIN role.\n\n**Updatable Fields:**\n- `priceUsd`, `originalPriceUsd`, `mileage`, `transmission`, `fuelType`, `images`, `status`, `availability`, `featured`, `isActive`, `isHidden`, and more"
					},
					"response": []
				},
				{
					"name": "Delete Vehicle (Admin Only)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"description": "Required - JWT access token (SUPER_ADMIN or OPERATIONS_ADMIN role)"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicles/:id",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicles", ":id"],
							"variable": [
								{
									"key": "id",
									"value": "vehicle_id_here",
									"description": "Vehicle ID (MongoDB ObjectId)"
								}
							]
						},
						"description": "Soft delete vehicle by ID (sets isActive=false, isHidden=true). Vehicle is not permanently deleted from database. Requires SUPER_ADMIN or OPERATIONS_ADMIN role. No request body needed."
					},
					"response": []
				},
				{
					"name": "Admin - List Trending Definitions",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"url": {"raw": "{{baseUrl}}/api/vehicles/trending-definitions", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "trending-definitions"]},
						"description": "List all trending definitions (admin-configured make/model/year rules for trending). Requires SUPER_ADMIN or OPERATIONS_ADMIN."
					},
					"response": []
				},
				{
					"name": "Admin - Get Trending Definition by ID",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"url": {"raw": "{{baseUrl}}/api/vehicles/trending-definitions/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "trending-definitions", ":id"], "variable": [{"key": "id", "value": "trending_definition_id_here"}]},
						"description": "Get a single trending definition by ID. Requires SUPER_ADMIN or OPERATIONS_ADMIN."
					},
					"response": []
				},
				{
					"name": "Admin - Create Trending Definition",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"body": {"mode": "raw", "raw": "{\n  \"make\": \"Mercedes-Benz\",\n  \"model\": null,\n  \"yearStart\": 2020,\n  \"yearEnd\": 2025,\n  \"label\": \"Popular Luxury\",\n  \"sortOrder\": 0,\n  \"isActive\": true\n}"},
						"url": {"raw": "{{baseUrl}}/api/vehicles/trending-definitions", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "trending-definitions"]},
						"description": "Create a trending rule. Required: make, yearStart, yearEnd. Optional: model, label, sortOrder, isActive. Each rule fetches 5 vehicles from Auto.dev for trending."
					},
					"response": []
				},
				{
					"name": "Admin - Update Trending Definition",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"body": {"mode": "raw", "raw": "{\n  \"yearStart\": 2019,\n  \"yearEnd\": 2024,\n  \"label\": \"Hot in Europe\",\n  \"isActive\": true\n}"},
						"url": {"raw": "{{baseUrl}}/api/vehicles/trending-definitions/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "trending-definitions", ":id"], "variable": [{"key": "id", "value": "trending_definition_id_here"}]},
						"description": "Update a trending definition by ID. Send only fields to update."
					},
					"response": []
				},
				{
					"name": "Admin - Delete Trending Definition",
					"request": {
						"method": "DELETE",
						"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}],
						"url": {"raw": "{{baseUrl}}/api/vehicles/trending-definitions/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "trending-definitions", ":id"], "variable": [{"key": "id", "value": "trending_definition_id_here"}]},
						"description": "Delete a trending definition by ID."
					},
					"response": []
				},
				{
					"name": "Admin - List Categories",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"url": {"raw": "{{baseUrl}}/api/vehicles/admin/categories", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "admin", "categories"]},
						"description": "List all vehicle categories (including inactive). Requires SUPER_ADMIN or OPERATIONS_ADMIN."
					},
					"response": []
				},
				{
					"name": "Admin - Get Category by ID",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"url": {"raw": "{{baseUrl}}/api/vehicles/admin/categories/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "admin", "categories", ":id"], "variable": [{"key": "id", "value": "category_id_here"}]},
						"description": "Get a single category by ID. Requires SUPER_ADMIN or OPERATIONS_ADMIN."
					},
					"response": []
				},
				{
					"name": "Admin - Create Category",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"body": {"mode": "raw", "raw": "{\n  \"slug\": \"suv\",\n  \"label\": \"SUV\",\n  \"bodyStyle\": \"suv\",\n  \"fuel\": null,\n  \"luxuryMakes\": [],\n  \"priceMin\": null,\n  \"sortOrder\": 1,\n  \"isActive\": true\n}"},
						"url": {"raw": "{{baseUrl}}/api/vehicles/admin/categories", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "admin", "categories"]},
						"description": "Create a category. Required: slug, label. Optional: bodyStyle, fuel, luxuryMakes (array), priceMin, sortOrder, isActive. For Luxury use luxuryMakes and/or priceMin."
					},
					"response": []
				},
				{
					"name": "Admin - Update Category",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}
						],
						"body": {"mode": "raw", "raw": "{\n  \"label\": \"Sport Utility Vehicle\",\n  \"sortOrder\": 2,\n  \"isActive\": true\n}"},
						"url": {"raw": "{{baseUrl}}/api/vehicles/admin/categories/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "admin", "categories", ":id"], "variable": [{"key": "id", "value": "category_id_here"}]},
						"description": "Update a category by ID. Send only fields to update."
					},
					"response": []
				},
				{
					"name": "Admin - Delete Category",
					"request": {
						"method": "DELETE",
						"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}", "description": "Admin JWT required"}],
						"url": {"raw": "{{baseUrl}}/api/vehicles/admin/categories/:id", "host": ["{{baseUrl}}"], "path": ["api", "vehicles", "admin", "categories", ":id"], "variable": [{"key": "id", "value": "category_id_here"}]},
						"description": "Delete a category by ID."
					},
					"response": []
				}
			],
			"description": "Vehicle management endpoints. Supports DB-first search with Auto.dev API fallback.\n\n**Public Endpoints (no auth required):**\n- GET `/api/vehicles` - List vehicles with filters (use ?category=suv for category filter)\n- GET `/api/vehicles/trending` - Trending vehicles (ordered first, then 5 per trending rule)\n- GET `/api/vehicles/categories` - List active categories\n- GET `/api/vehicles/:id` - Get vehicle by ID or VIN\n\n**Protected Endpoints (require authentication):**\n- POST `/api/vehicles` - Create vehicle (Admin only)\n- POST `/api/vehicles/sync/:vin` - Sync vehicle from Auto.dev API\n- POST `/api/vehicles/save-from-api` - Save vehicle from API to DB (e.g., on payment)\n- PUT `/api/vehicles/:id` - Update vehicle (Admin only)\n- DELETE `/api/vehicles/:id` - Delete vehicle (Admin only)\n\n**Admin (SUPER_ADMIN / OPERATIONS_ADMIN):**\n- GET/POST/PUT/DELETE `/api/vehicles/trending-definitions` - Manage trending rules (make, model, yearStart, yearEnd)\n- GET/POST/PUT/DELETE `/api/vehicles/admin/categories` - Manage vehicle categories (slug, label, bodyStyle, fuel, luxuryMakes, priceMin)\n\n**Caching:**\n- Redis cache with 12-hour TTL for API responses\n- Automatic price refresh for stale DB vehicles"
		},
		{
			"name": "Addresses",
			"item": [
				{
					"name": "Create Address",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"type\": \"NORMAL\",\n  \"street\": \"123 Main St\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"city\": \"Los Angeles\",\n  \"state\": \"CA\",\n  \"postalCode\": \"90001\",\n  \"country\": \"USA\",\n  \"isDefault\": true,\n  \"additionalInfo\": \"Apt 4B\",\n  \"phoneNumber\": \"+1234567890\",\n  \"additionalPhoneNumber\": \"+1987654321\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/addresses",
							"host": ["{{baseUrl}}"],
							"path": ["api", "addresses"]
						},
						"description": "Create a new address for the authenticated user. **Requires authentication and user profile to exist.**\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**Request Body:**\n- `city` (required): City name\n- `type` (optional): Address type - NORMAL, BILLING, SHIPPING (default: NORMAL)\n- `street` (optional): Street address\n- `firstName` (optional): First name for address\n- `lastName` (optional): Last name for address\n- `state` (optional): State/province code\n- `postalCode` (optional): Postal/ZIP code\n- `country` (optional): Country name\n- `isDefault` (optional): Set as default address (boolean)\n- `additionalInfo` (optional): Additional address info (e.g., Apt 4B)\n- `phoneNumber` (optional): Primary phone number\n- `additionalPhoneNumber` (optional): Secondary phone number\n\n**Response:**\n- Returns created address object (201 Created)\n\n**Note:** Address is automatically linked to the authenticated user's profile."
					},
					"response": []
				},
				{
					"name": "Get User Addresses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/addresses",
							"host": ["{{baseUrl}}"],
							"path": ["api", "addresses"]
						},
						"description": "Get all addresses for the authenticated user. **Requires authentication.**\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**Response:**\n- Array of address objects belonging to the authenticated user\n\n**Note:** Returns empty array if user has no addresses."
					},
					"response": []
				},
				{
					"name": "Get Default Address",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/addresses/default?type=NORMAL",
							"host": ["{{baseUrl}}"],
							"path": ["api", "addresses", "default"],
							"query": [
								{
									"key": "type",
									"value": "NORMAL",
									"description": "Address type: NORMAL, BILLING, SHIPPING"
								}
							]
						},
						"description": "Get the default address for the authenticated user filtered by address type. **Requires authentication.**\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**Query Parameters:**\n- `type` (optional): Address type - NORMAL, BILLING, SHIPPING (default: NORMAL)\n\n**Response:**\n- Default address object if found\n- 404 if no default address exists for the specified type\n\n**Note:** Returns the address where `isDefault=true` for the specified type."
					},
					"response": []
				},
				{
					"name": "Update Address",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"street\": \"456 Oak Ave\",\n  \"city\": \"San Francisco\",\n  \"state\": \"CA\",\n  \"postalCode\": \"94102\",\n  \"isDefault\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/addresses/:id",
							"host": ["{{baseUrl}}"],
							"path": ["api", "addresses", ":id"],
							"variable": [
								{
									"key": "id",
									"value": "address_id_here",
									"description": "Address ID"
								}
							]
						},
						"description": "Update an existing address by ID. **Requires authentication.** Partial updates supported - only include fields to update.\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**URL Parameters:**\n- `id` (required): Address ID (MongoDB ObjectId)\n\n**Request Body (all fields optional):**\n- `city`, `street`, `firstName`, `lastName`, `state`, `postalCode`, `country`, `isDefault`, `additionalInfo`, `phoneNumber`, `additionalPhoneNumber`, `type`\n\n**Response:**\n- Updated address object\n\n**Note:** Only the address owner can update their addresses."
					},
					"response": []
				},
				{
					"name": "Delete Address",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/addresses/:id",
							"host": ["{{baseUrl}}"],
							"path": ["api", "addresses", ":id"],
							"variable": [
								{
									"key": "id",
									"value": "address_id_here",
									"description": "Address ID"
								}
							]
						},
						"description": "Delete an address by ID. **Requires authentication.**\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**URL Parameters:**\n- `id` (required): Address ID (MongoDB ObjectId)\n\n**Response:**\n- Success message\n\n**Note:** Only the address owner can delete their addresses. No request body needed."
					},
					"response": []
				}
			],
			"description": "Address management endpoints for authenticated users. All endpoints require authentication via `Authorization: Bearer {accessToken}` header.\n\n**Features:**\n- Create multiple addresses per user\n- Set default address by type (NORMAL, BILLING, SHIPPING)\n- Update and delete addresses\n- Get all addresses or default address by type\n\n**Address Types:**\n- `NORMAL`: General purpose address\n- `BILLING`: Billing address for payments\n- `SHIPPING`: Shipping address for deliveries\n\n**Note:** User must have a profile before creating addresses."
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get User by Email",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/users/email/:email",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "email", ":email"],
							"variable": [
								{
									"key": "email",
									"value": "user@example.com",
									"description": "User email"
								}
							]
						},
						"description": "Get user information by email address. **Public endpoint** - no authentication required.\n\n**URL Parameters:**\n- `email` (required): User email address\n\n**Response:**\n- User object (without sensitive information like password)\n- 404 if user not found\n\n**Note:** This endpoint does not require authentication. Use with caution in production."
					},
					"response": []
				},
				{
					"name": "Verify User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/users/verify/:userId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "verify", ":userId"],
							"variable": [
								{
									"key": "userId",
									"value": "user_id_here",
									"description": "User ID"
								}
							]
						},
						"description": "Verify user account by user ID. **Public endpoint** - no authentication required.\n\n**URL Parameters:**\n- `userId` (required): User ID (MongoDB ObjectId)\n\n**Response:**\n- `verified`: true if user exists and is verified\n- Error if user not found or verification fails\n\n**Note:** This endpoint does not require authentication."
					},
					"response": []
				},
				{
					"name": "Deactivate Account",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/users/deactivate/:userId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "deactivate", ":userId"],
							"variable": [
								{
									"key": "userId",
									"value": "user_id_here",
									"description": "User ID"
								}
							]
						},
						"description": "Deactivate (soft delete) a user account by user ID. **Public endpoint** - no authentication required.\n\n**URL Parameters:**\n- `userId` (required): User ID (MongoDB ObjectId)\n\n**Response:**\n- `deactivated`: true if account deactivated successfully\n- Error if deactivation fails\n\n**Note:** This is a soft delete - account is marked as inactive but not permanently deleted. This endpoint does not require authentication - consider adding authentication/authorization in production."
					},
					"response": []
				},
				{
					"name": "Update Password",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"newPassword\": \"newSecurePassword123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/password/:userId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "password", ":userId"],
							"variable": [
								{
									"key": "userId",
									"value": "user_id_here",
									"description": "User ID"
								}
							]
						},
						"description": "Update user password by user ID. **Public endpoint** - no authentication required.\n\n**URL Parameters:**\n- `userId` (required): User ID (MongoDB ObjectId)\n\n**Request Body:**\n- `newPassword` (required): New password (minimum 6 characters recommended)\n\n**Response:**\n- Success message if password updated\n- Error if update fails\n\n**Security Note:** This endpoint does not require authentication - consider adding authentication/authorization in production. User should be authenticated and only able to update their own password."
					},
					"response": []
				}
			],
			"description": "User management endpoints for retrieving and managing user accounts.\n\n**Available Endpoints:**\n- Get user by email\n- Verify user by ID\n- Deactivate account (soft delete)\n- Update password\n\n**Security Note:** These endpoints currently do not require authentication. Consider adding authentication/authorization middleware in production to ensure users can only access/modify their own accounts.\n\n**⚠️ IMPORTANT:** These routes are **NOT currently registered** in `app.ts` (commented out). They will return 404 until routes are enabled."
		},
		{
			"name": "Payments",
			"item": [
				{
					"name": "Initiate Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"orderId\": \"order_id_here\",\n  \"amountUsd\": 5000.00,\n  \"provider\": \"stripe\",\n  \"paymentType\": \"DEPOSIT\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments/init",
							"host": ["{{baseUrl}}"],
							"path": ["api", "payments", "init"]
						},
						"description": "Initiate a payment for an order. **Requires authentication.**\n\n**Request Headers:**\n- `Authorization: Bearer {accessToken}` (required)\n\n**Request Body:**\n- `orderId` (required): Order ID (MongoDB ObjectId)\n- `amountUsd` (required): Payment amount in USD (positive number)\n- `provider` (required): Payment provider - \"stripe\", \"paystack\", or \"flutterwave\"\n- `paymentType` (required): Payment type - \"DEPOSIT\", \"FULL_PAYMENT\", \"BALANCE\", \"REFUND\", \"PARTIAL_REFUND\"\n\n**Response:**\n- Payment initialization result with provider-specific payment link/instructions\n\n**Note:** Payment routes are registered and active. Requires valid JWT access token."
					},
					"response": []
				},
				{
					"name": "Paystack Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "x-paystack-signature",
								"value": "webhook_signature_here"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"data\": {\n    \"reference\": \"payment_reference_here\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments/webhooks/paystack",
							"host": ["{{baseUrl}}"],
							"path": ["api", "payments", "webhooks", "paystack"]
						},
						"description": "Paystack webhook endpoint for payment notifications. **No authentication required** (uses webhook signature).\n\n**Request Headers:**\n- `x-paystack-signature` (required): Webhook signature for verification\n\n**Request Body:**\n- `data.reference` (required): Payment reference from Paystack\n\n**Response:**\n- Success confirmation\n\n**Note:** Webhook endpoint is registered and active. Configure this URL in your Paystack dashboard webhook settings."
					},
					"response": []
				},
				{
					"name": "Stripe Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "stripe-signature",
								"value": "webhook_signature_here"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"data\": {\n    \"object\": {\n      \"metadata\": {\n        \"reference\": \"payment_reference_here\"\n      }\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/payments/webhooks/stripe",
							"host": ["{{baseUrl}}"],
							"path": ["api", "payments", "webhooks", "stripe"]
						},
						"description": "Stripe webhook endpoint for payment notifications. **No authentication required** (uses webhook signature).\n\n**Request Headers:**\n- `stripe-signature` (required): Webhook signature for verification\n\n**Request Body:**\n- `data.object.metadata.reference` (required): Payment reference from Stripe metadata\n\n**Response:**\n- Success confirmation\n\n**Note:** Webhook endpoint is registered and active. Configure this URL in your Stripe dashboard webhook settings."
					},
					"response": []
				}
			],
			"description": "Payment processing endpoints for orders.\n\n**Available Endpoints:**\n- Initiate payment (requires authentication)\n- Paystack webhook (no auth, uses signature)\n- Stripe webhook (no auth, uses signature)\n\n**Payment Providers:**\n- Stripe\n- Paystack\n- Flutterwave\n\n**Payment Types:**\n- DEPOSIT: Initial deposit payment\n- FULL_PAYMENT: Complete order payment\n- BALANCE: Remaining balance payment\n- REFUND: Full refund\n- PARTIAL_REFUND: Partial refund\n\n**Note:** All payment routes are registered and active. Payment initiation requires authentication via JWT token."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		},
		{
			"key": "userEmail",
			"value": "",
			"type": "string"
		}
	]
}

