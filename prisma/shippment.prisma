// ============================================
// SHIPMENTS & LOGISTICS
// ============================================

model Shipment {
  id                  String          @id @default(auto()) @map("_id") @db.ObjectId
  orderId             String          @unique @db.ObjectId
  order               Order           @relation(fields: [orderId], references: [id], onDelete: Cascade)
  
  // Shipping Method
  shippingMethod      ShippingMethod?
  carrier             String? // Shipping company name
  carrierTrackingNumber String?
  
  // Ports
  originPort          String?
  destinationPort     String?
  originCountry       String  @default("USA")
  destinationCountry  String  @default("Nigeria")
  
  // Vessel/Container Info
  vesselName          String?
  vesselNumber        String?
  containerNumber     String?
  billOfLading        String?
  bookingNumber       String?
  
  // Status
  status              ShipmentStatus  @default(PENDING)
  previousStatus      String[]        @default([])
  
  // Dates
  bookedAt            DateTime?
  departedDate        DateTime?
  etaPort             DateTime?
  arrivedPortDate     DateTime?
  clearedCustomsDate   DateTime?
  outForDeliveryDate  DateTime?
  deliveredDate       DateTime?
  
  // Tracking Updates (embedded)
  trackingUpdates     Json[] // [{ date, status, location, description }]
  
  // Delivery Info
  deliveryAddress     String?
  deliveryContactName  String?
  deliveryContactPhone String?
  deliveryInstructions String?
  
  // Customs
  customsStatus       String?
  customsHoldReason   String?
  customsDocuments    String[] @default([])
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  
  @@map("shipments")
}

enum ShipmentStatus {
  PENDING
  BOOKED
  AT_PORT
  LOADED
  IN_TRANSIT
  ARRIVED
  CUSTOMS_HOLD
  CLEARED
  OUT_FOR_DELIVERY
  DELIVERED
  DELAYED
  LOST
  DAMAGED
}
